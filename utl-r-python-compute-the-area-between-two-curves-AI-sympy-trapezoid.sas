%let pgm=utl-r-python-compute-the-area-between-two-curves-AI-sympy-trapezoid;

R python compute the area between two curves AI sympy trapezoid

   Three Solutions

       1 python symbolic calculus
       2 r trapx function
       3 r manual trapezoid

github
https://tinyurl.com/wj26ry9t
https://github.com/rogerjdeangelis/utl-r-python-compute-the-area-between-two-curves-AI-sympy-trapezoid


/*               _     _
 _ __  _ __ ___ | |__ | | ___ _ __ ___
| `_ \| `__/ _ \| `_ \| |/ _ \ `_ ` _ \
| |_) | | | (_) | |_) | |  __/ | | | | |
| .__/|_|  \___/|_.__/|_|\___|_| |_| |_|
|_|
*/


/**************************************************************************************************************************/
/*                           |                                       |                                                    */
/*                           |                                       |                                                    */
/* 1 PYTHON SYMBOLIC CALCULUS|                                       |                                                    */
/* ==========================|                                       |                                                    */
/*                           |                                       |                                                    */
/*  INPUT                    | %symdel sasmacrovar / nowarn;         |  %put &=sasmacrovar;                               */
/*  =====                    | %utl_submit_py64_310("                |                                                    */
/*                           | import pyperclip as pyp;              |  area= -x**4/4+x**3/3 from 0 to 1 = 1/12           */
/*   1                       | from sympy import *;                  |                                                    */
/*  /                        | x, y = symbols( 'x y');               |                                   =  0.803333      */
/*  | x*(1-x^2)-x*(1-x)dx    | dif = x*(1-x**2) - x*(1-x);           |                                                    */
/* /                         | integral = integrate(dif, x);         |                         X                          */
/* 0                         | print(integral);                      |       0.0    0.2    0.4    0.6    0.8    1.0       */
/*                           | area = integrate(-x**3+x**2,(x,0,1)); | Y  ---+------+------+------+------+------+---      */
/*                           | print(area);                          |    |                                        |      */
/*                           | pyp.copy('area = '                    | 0.4+ YTOP= X*(X-1)            Area=0.08333  +0.4   */
/*                           |      + str(integral)                  |    | YBOT=X*(1-X^2)    *******              |      */
/*                           |      + ' from 0 to 1 = '              |    |                 ***     ***            |      */
/*                           |      + str(area));                    |    | Area between   **         **           |      */
/*                           | ",return=sasmacrovar);                |    | =0.0833333   ***           **          |      */
/*                           |                                       | 0.3+             **  Find Area   **         +0.3   */
/*                           | %put &=sasmacrovar;                   |    |            ** Between Curves **        |      */
/*                           |                                       |    |           **       x          *        |      */
/*                           |                                       |    |           *   xxxxxxxxxx      **       |      */
/*                           |                                       |    |          ** xxx        xxxx    *       |      */
/*                           |                                       | 0.2+         **xx              xx    *      +0.2   */
/*                           |                                       |    |        **xx   Y=X*(1-X^2)  xx   **     |      */
/*                           |                                       |    |       **xx                  xxx  *     |      */
/*                           |                                       |    |       *x    Area Between      xx *     |      */
/*                           |                                       |    |      **      Integrate         xx**    |      */
/*                           |                                       | 0.1+     ** 1                        xx*    +0.1   */
/*                           |                                       |    |    ** /                          x**   |      */
/*                           |                                       |    |    *  | x*(1-x^2)-x*(1-x)dx      xx*   |      */
/*                           |                                       |    |   ** /                            x*   |      */
/*                           |                                       |    |  **  0                             **  |      */
/*                           |                                       | 0.0+  *AREA= X^3/3 -X^4/4=1/12=0.083333  *  +0.0   */
/*                           |                                       |    |                                        |      */
/*                           |                                       |    ---+------+------+------+------+------+---      */
/*                           |                                       |      0.0    0.2    0.4    0.6    0.8    1.0        */
/*                           |                                       |                        X                           */
/*                           |                                       |                                                    */
/*------------------------------------------------------------------------------------------------------------------------*/
/*                           |                                       |                                                    */
/* 2 R TRAPX FUNCTION        |                                       |                                                    */
/* ==================        |                                       |                                                    */
/*                           |                                       |                                                    */
/* x<- (0:100)/100;          | %symdel area / nowarn;                | %put &=area;                                       */
/* y<- x*(1-x^2) - x*(1-x);  |                                       |                                                    */
/*                           | %utl_submit_r64x('                    | AREA=0.08333325                                    */
/*                           | library(caTools);                     |                                                    */
/*                           | x = (0:1000)/1000;                    |                                                    */
/*                           | area = trapz(x, x*(1-x^2) - x*(1-x)); |                                                    */
/*                           | writeClipboard(as.character(area));   |                                                    */
/*                           | ',return=area);                       |                                                    */
/*                           |                                       |                                                    */
/*                           | %put &=area;                          |                                                    */
/*                           |                                       |                                                    */
/*------------------------------------------------------------------------------------------------------------------------*/
/*                           |                                       |                                                    */
/* 3 MANUAL TRAPEZOID        |                                       |                                                    */
/* ==================        |                                       |                                                    */
/*                           |                                       |                                                    */
/* x<- (0:100)/100;          | %symdel area / nowarn;                | %put &=area;                                       */
/* y<- x*(1-x^2) - x*(1-x) ; |                                       |                                                    */
/*                           | %utl_submit_r64x('                    | AREA=0.083325                                      */
/*                           | trap <- function(x, y) {              |                                                    */
/*                           |   n <- length(x);                     |                                                    */
/*                           |   h <- x[2] - x[1];                   |                                                    */
/*                           |   sum <- (y[1] + y[n]) / 2;           |                                                    */
/*                           |   for (i in 2:(n-1)) {                |                                                    */
/*                           |     sum <- sum + y[i];                |                                                    */
/*                           |   };                                  |                                                    */
/*                           |   return(h * sum);                    |                                                    */
/*                           | };                                    |                                                    */
/*                           | x <- (0:100)/100;                     |                                                    */
/*                           | y <- x*(1-x^2) - x*(1-x) ;            |                                                    */
/*                           | area=trap(x, y);                      |                                                    */
/*                           | writeClipboard(as.character(area));   |                                                    */
/*                           | ',return=area);                       |                                                    */
/*                           |                                       |                                                    */
/*                           | %put &=area;                          |                                                    */
/*                           |                                       |                                                    */
/**************************************************************************************************************************/

/*               _   _
/ |  _ __  _   _| |_| |__   ___  _ __    ___ _   _ _ __ ___  _ __  _   _
| | | `_ \| | | | __| `_ \ / _ \| `_ \  / __| | | | `_ ` _ \| `_ \| | | |
| | | |_) | |_| | |_| | | | (_) | | | | \__ \ |_| | | | | | | |_) | |_| |
|_| | .__/ \__, |\__|_| |_|\___/|_| |_| |___/\__, |_| |_| |_| .__/ \__, |
 _  |_|    |___/    _                        |___/          |_|    |___/
(_)_ __  _ __  _   _| |_
| | `_ \| `_ \| | | | __|
| | | | | |_) | |_| | |_
|_|_| |_| .__/ \__,_|\__|
        |_|
*/

    1
   /
   | x*(1-x^2)-x*(1-x)dx
  /
  0

/*
 _ __  _ __ ___   ___ ___  ___ ___
| `_ \| `__/ _ \ / __/ _ \/ __/ __|
| |_) | | | (_) | (_|  __/\__ \__ \
| .__/|_|  \___/ \___\___||___/___/
|_|
*/

%symdel sasmacrovar / nowarn;
%utl_submit_py64_310("
import pyperclip as pyp;
from sympy import *;
x, y = symbols( 'x y');
dif = x*(1-x**2) - x*(1-x);
integral = integrate(dif, x);
print(integral);
area = integrate(-x**3+x**2,(x,0,1));
print(area);
pyp.copy('area = '
     + str(integral)
     + ' from 0 to 1 = '
     + str(area));
",return=sasmacrovar);

%put &=sasmacrovar;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* %put &=sasmacrovar;                                                                                                    */
/*                                                                                                                        */
/* AREA=0.08333325                                                                                                        */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*___           _
|___ \   _ __  | |_ _ __ __ _ _ __ ____
  __) | | `__| | __| `__/ _` | `_ \_  /
 / __/  | |    | |_| | | (_| | |_) / /
|_____| |_|     \__|_|  \__,_| .__/___|
 _                   _       |_|
(_)_ __  _ __  _   _| |_
| | `_ \| `_ \| | | | __|
| | | | | |_) | |_| | |_
|_|_| |_| .__/ \__,_|\__|
        |_|
*/

 x<- (0:100)/100;
 y<- x*(1-x^2) - x*(1-x) ;

/*
 _ __  _ __ ___   ___ ___  ___ ___
| `_ \| `__/ _ \ / __/ _ \/ __/ __|
| |_) | | | (_) | (_|  __/\__ \__ \
| .__/|_|  \___/ \___\___||___/___/
|_|
*/

%symdel area / nowarn;

%utl_submit_r64x('
library(caTools);
x = (0:1000)/1000;
area = trapz(x, x*(1-x^2) - x*(1-x));
writeClipboard(as.character(area));
',return=area);

%put &=area;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* %put &=area                                                                                                            */
/*                                                                                                                        */
/* AREA=0.0.08333325                                                                                                     */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*____                                            _  _                                 _     _
|___ /   _ __   _ __ ___   __ _ _ __  _   _  __ _| || |_ _ __ __ _ _ __   ___ _______ (_) __| |
  |_ \  | `__| | `_ ` _ \ / _` | `_ \| | | |/ _` | || __| `__/ _` | `_ \ / _ \_  / _ \| |/ _` |
 ___) | | |    | | | | | | (_| | | | | |_| | (_| | || |_| | | (_| | |_) |  __// / (_) | | (_| |
|____/  |_|    |_| |_| |_|\__,_|_| |_|\__,_|\__,_|_| \__|_|  \__,_| .__/ \___/___\___/|_|\__,_|
*/


 x<- (0:100)/100;
 y<- x*(1-x^2) - x*(1-x) ;

 %symdel area / nowarn;

 %utl_submit_r64x('
 trap <- function(x, y) {
   n <- length(x);
   h <- x[2] - x[1];
   sum <- (y[1] + y[n]) / 2;
   for (i in 2:(n-1)) {
     sum <- sum + y[i];
   };
   return(h * sum);
 };
 x <- (0:100)/100;
 y <- x*(1-x^2) - x*(1-x) ;
 area=trap(x, y);
 writeClipboard(as.character(area));
 ',return=area);

 %put &=area;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* %put &=area                                                                                                            */
/*                                                                                                                        */
/* AREA=0.0.083325                                                                                                        */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*              _
  ___ _ __   __| |
 / _ \ `_ \ / _` |
|  __/ | | | (_| |
 \___|_| |_|\__,_|

*/
